{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Cover Letter — {{ applicant.first_name }} {{ applicant.last_name }}{% endblock %}</title>

    <!-- Tailwind (browser build) -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4" defer></script>

    <!-- Optional custom stylesheet (override / print tweaks) -->
    <link rel="stylesheet" href="{% static 'css/coverLetter.css' %}" />

    
  </head>

  <body class="bg-gray-50 text-gray-800 antialiased overflow-hidden">
    <div class="w-full min-h-screen mx-auto bg-white ">
      <div class="">
        <!-- Sidebar -->
        <aside class="md:w-1/3 bg-gradient-to-b from-slate-900 to-slate-800 text-white p-8 flex flex-col items-center gap-6">
          <!-- Profile -->
          <div class="w-28 h-28 rounded-full overflow-hidden border-4 border-white shadow-md">
            {% if applicant.photo_url %}
              <img src="{{ applicant.photo_url }}" alt="{{ applicant.first_name }} {{ applicant.last_name }}" class="w-full h-full object-cover">
            {% else %}
              <div class="w-full h-full bg-gray-200 flex items-center justify-center text-slate-700 font-semibold">{{ applicant.first_name|first }}{{ applicant.last_name|first }}</div>
            {% endif %}
          </div>

          <div class="text-center">
            <h2 class="text-lg font-bold">{{ applicant.first_name }} {{ applicant.last_name }}</h2>
            <p class="text-sm text-slate-200">{{ applicant.title|default:'Designer' }}</p>
          </div>

          <div class="w-full border-t border-white/20 pt-4 text-center text-xs text-slate-200">
            <p class="leading-tight">{{ applicant.address_line1 }}{% if applicant.address_line2 %}<br>{{ applicant.address_line2 }}{% endif %}</p>
            <p class="mt-2">{{ applicant.city }}, {{ applicant.state }} {% if applicant.postal_code %}{{ applicant.postal_code }}{% endif %}</p>
          </div>

          <div class="w-full text-center text-xs text-slate-200">
            <p class="mt-4">Phone: <a href="tel:{{ applicant.phone }}" class="underline">{{ applicant.phone }}</a></p>
            <p>Email: <a href="mailto:{{ applicant.email }}" class="underline">{{ applicant.email }}</a></p>
            {% if applicant.website %}<p class="mt-2 truncate">{{ applicant.website }}</p>{% endif %}
          </div>

          <div class="mt-auto text-center text-[10px] text-slate-300 no-print">
            Generated by your app • {{ date|default:None }}
          </div>
        </aside>

        <!-- Main content -->
        <main class="md:flex-1 p-8">
          <header class="mb-6">
            <h1 class="text-3xl font-extrabold text-slate-900">Cover Letter</h1>
            <h2 class="text-xl font-semibold text-indigo-600">Application for {{ position.title|default:'[Position Title]' }} at {{ company.name|default:'[Company Name]' }}</h2>
          </header>

          <!-- Recipient info and date -->
          <div class="flex flex-col sm:flex-row sm:justify-between items-start gap-4 mb-6 text-sm">
            <div>
              <p class="font-semibold">{{ hiring_manager.name|default:None}}</p>
              <p>{{ company.name }}</p>
              <p>{{ company.address }}</p>
            </div>
            <div class="text-sm text-slate-600">
              <p>{{ date|default:None }}</p>
            </div>
          </div>

          <!-- Opening -->
          <section class="prose prose-sm prose-slate mb-4">
            <p>
              Dear {{ hiring_manager.name|default:'Hiring Manager' }},
            </p>

            <p>
              I am writing to express my interest in the {{ position.title|default:'[Position Title]' }} role at {{ company.name|default:'[Company Name]' }}. With {{ applicant.years_experience|default:'X' }} years of experience in {{ applicant.field|default:'design' }}, I bring a strong combination of practical skills and a thoughtful, user-centered approach to problem solving.
            </p>

            <p>
              In my most recent role at {{ applicant.current_employer|default:'[Current Employer]' }}, I led projects that produced measurable results, including {{ applicant.key_achievement|default:'increased engagement, simplified workflows, or launched successful products' }}. I enjoy collaborating with cross-functional teams to turn ideas into polished, effective experiences.
            </p>

            <p>
              I am particularly excited about {{ company.name }} because {{ applicant.reason_for_interest|default:'of its mission/approach to design and innovation' }}. I would welcome the opportunity to bring my skills in {{ applicant.key_skills|default:'UI design, prototyping, and research' }} to your team.
            </p>

            <p>
              Thank you for considering my application. I look forward to the possibility of discussing how I can contribute to {{ company.name }}. Please feel free to contact me at <a href="tel:{{ applicant.phone }}">{{ applicant.phone }}</a> or <a href="mailto:{{ applicant.email }}">{{ applicant.email }}</a> to arrange a time to speak.
            </p>

            <p>Sincerely,</p>

            <div class="mt-4">
              <p class="font-semibold text-lg">{{ applicant.first_name }} {{ applicant.last_name }}</p>
              <p class="text-sm text-slate-600">{{ applicant.title|default:'Designer' }}</p>
            </div>
          </section>

          <!-- Optional: Attachments / Post details -->
          {% if post %}
          <section class="border-t pt-4 mt-6 text-sm text-slate-700">
            <p><span class="font-semibold">Role posted:</span> {{ post.title }}</p>
            <p><span class="font-semibold">Location:</span> {{ post.location|default:'Remote / TBD' }}</p>
            <p><span class="font-semibold">Reference:</span> {{ post.reference|default:'—' }}</p>
          </section>
          {% endif %}

          <!-- Footer (print friendly) -->
          <footer class="mt-8 border-t pt-4 text-xs text-slate-500">
            <p>Attachments: {{ attachments|length|default:0 }} — CV, portfolio, references (as provided)</p>
          </footer>
        </main>
      </div>
    </div>
  </body>
</html>